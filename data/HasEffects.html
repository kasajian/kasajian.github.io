<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:8.0pt;
	margin-left:0in;
	line-height:105%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:8.0pt;
	margin-left:.5in;
	line-height:105%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:105%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:105%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:8.0pt;
	margin-left:.5in;
	line-height:105%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.msonormal0, li.msonormal0, div.msonormal0
	{mso-style-name:msonormal;
	margin-right:0in;
	margin-left:0in;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;}
p.msochpdefault, li.msochpdefault, div.msochpdefault
	{mso-style-name:msochpdefault;
	margin-right:0in;
	margin-left:0in;
	font-size:12.0pt;
	font-family:"Calibri",sans-serif;}
p.msopapdefault, li.msopapdefault, div.msopapdefault
	{mso-style-name:msopapdefault;
	margin-right:0in;
	margin-bottom:8.0pt;
	margin-left:0in;
	line-height:105%;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;}
.MsoChpDefault
	{font-size:10.0pt;
	font-family:"Calibri",sans-serif;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:.5in .5in .5in .5in;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=EN-US>

<div class=WordSection1>

<p class=MsoNormal>Visual Studio Analyzer</p>

<p class=MsoNormal>I want a Roslyn analyzer which does the following:</p>

<p class=MsoNormal>If a method lacks a particularly attribute annotation, I
want to generate a warning if any of the methods it calls has a particular
attribute.</p>

<p class=MsoNormal>Imagine I have the following Attributes:</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp; [</span><span style='font-size:9.5pt;
font-family:Consolas;color:darkblue'>AttributeUsage</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>(</span><span
style='font-size:9.5pt;font-family:Consolas;color:darkblue'>AttributeTargets</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>.</span><b><span
style='font-size:9.5pt;font-family:Consolas;color:purple'>Method</span></b><span
style='font-size:9.5pt;font-family:Consolas;color:black'> | </span><span
style='font-size:9.5pt;font-family:Consolas;color:darkblue'>AttributeTargets</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>.</span><b><span
style='font-size:9.5pt;font-family:Consolas;color:purple'>Property</span></b><span
style='font-size:9.5pt;font-family:Consolas;color:black'> | </span><span
style='font-size:9.5pt;font-family:Consolas;color:darkblue'>AttributeTargets</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>.</span><b><span
style='font-size:9.5pt;font-family:Consolas;color:purple'>Class</span></b><span
style='font-size:9.5pt;font-family:Consolas;color:black'> | </span><span
style='font-size:9.5pt;font-family:Consolas;color:darkblue'>AttributeTargets</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>.</span><b><span
style='font-size:9.5pt;font-family:Consolas;color:purple'>Struct</span></b><span
style='font-size:9.5pt;font-family:Consolas;color:black'> | </span><span
style='font-size:9.5pt;font-family:Consolas;color:darkblue'>AttributeTargets</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>.</span><b><span
style='font-size:9.5pt;font-family:Consolas;color:purple'>Interface</span></b><span
style='font-size:9.5pt;font-family:Consolas;color:black'>)]</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp; </span><span style='font-size:9.5pt;font-family:
Consolas;color:blue'>public</span><span style='font-size:9.5pt;font-family:
Consolas;color:black'> </span><span style='font-size:9.5pt;font-family:Consolas;
color:blue'>class</span><span style='font-size:9.5pt;font-family:Consolas;
color:black'> </span><span style='font-size:9.5pt;font-family:Consolas;
color:darkblue'>HasEffects</span><span style='font-size:9.5pt;font-family:Consolas;
color:black'> : </span><span style='font-size:9.5pt;font-family:Consolas;
color:darkblue'>Attribute</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp; {</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-size:9.5pt;font-family:Consolas;color:blue'>public</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'> </span><span
style='font-size:9.5pt;font-family:Consolas;color:darkblue'>HasEffects</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>(</span><span
style='font-size:9.5pt;font-family:Consolas;color:blue'>params</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'> </span><span
style='font-size:9.5pt;font-family:Consolas;color:blue'>string</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>[] effect) { }</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp; }</span></p>

<p class=MsoNormal style='margin-top:6.0pt'>and:</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp; [</span><span style='font-size:9.5pt;
font-family:Consolas;color:darkblue'>AttributeUsage</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>(</span><span
style='font-size:9.5pt;font-family:Consolas;color:darkblue'>AttributeTargets</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>.</span><b><span
style='font-size:9.5pt;font-family:Consolas;color:purple'>Method</span></b><span
style='font-size:9.5pt;font-family:Consolas;color:black'> | </span><span
style='font-size:9.5pt;font-family:Consolas;color:darkblue'>AttributeTargets</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>.</span><b><span
style='font-size:9.5pt;font-family:Consolas;color:purple'>Property</span></b><span
style='font-size:9.5pt;font-family:Consolas;color:black'> | </span><span
style='font-size:9.5pt;font-family:Consolas;color:darkblue'>AttributeTargets</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>.</span><b><span
style='font-size:9.5pt;font-family:Consolas;color:purple'>Class</span></b><span
style='font-size:9.5pt;font-family:Consolas;color:black'> | </span><span
style='font-size:9.5pt;font-family:Consolas;color:darkblue'>AttributeTargets</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>.</span><b><span
style='font-size:9.5pt;font-family:Consolas;color:purple'>Struct</span></b><span
style='font-size:9.5pt;font-family:Consolas;color:black'> | </span><span
style='font-size:9.5pt;font-family:Consolas;color:darkblue'>AttributeTargets</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>.</span><b><span
style='font-size:9.5pt;font-family:Consolas;color:purple'>Interface</span></b><span
style='font-size:9.5pt;font-family:Consolas;color:black'>)]</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp; </span><span style='font-size:9.5pt;font-family:
Consolas;color:blue'>public</span><span style='font-size:9.5pt;font-family:
Consolas;color:black'> </span><span style='font-size:9.5pt;font-family:Consolas;
color:blue'>class</span><span style='font-size:9.5pt;font-family:Consolas;
color:black'> </span><span style='font-size:9.5pt;font-family:Consolas;
color:darkblue'>WithEffects</span><span style='font-size:9.5pt;font-family:
Consolas;color:black'> : </span><span style='font-size:9.5pt;font-family:Consolas;
color:darkblue'>Attribute</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp; {</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-size:9.5pt;font-family:Consolas;color:blue'>public</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'> </span><span
style='font-size:9.5pt;font-family:Consolas;color:darkblue'>WithEffects</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>(</span><span
style='font-size:9.5pt;font-family:Consolas;color:blue'>params</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'> </span><span
style='font-size:9.5pt;font-family:Consolas;color:blue'>string</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>[] effect) { }</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp; }</span></p>

<p class=MsoNormal style='margin-top:6.0pt'>Along with helper class:</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp; </span><span style='font-size:9.5pt;font-family:
Consolas;color:blue'>public</span><span style='font-size:9.5pt;font-family:
Consolas;color:black'> </span><span style='font-size:9.5pt;font-family:Consolas;
color:blue'>static</span><span style='font-size:9.5pt;font-family:Consolas;
color:black'> </span><span style='font-size:9.5pt;font-family:Consolas;
color:blue'>class</span><span style='font-size:9.5pt;font-family:Consolas;
color:black'> </span><span style='font-size:9.5pt;font-family:Consolas;
color:darkblue'>SideEffect</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp; {</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-size:9.5pt;font-family:Consolas;color:blue'>public</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'> </span><span
style='font-size:9.5pt;font-family:Consolas;color:blue'>const</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'> </span><span
style='font-size:9.5pt;font-family:Consolas;color:blue'>string</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'> </span><b><span
style='font-size:9.5pt;font-family:Consolas;color:purple'>IO</span></b><span
style='font-size:9.5pt;font-family:Consolas;color:black'> = </span><span
style='font-size:9.5pt;font-family:Consolas;color:#A31515'>&quot;IO&quot;</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-size:9.5pt;font-family:Consolas;color:blue'>public</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'> </span><span
style='font-size:9.5pt;font-family:Consolas;color:blue'>const</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'> </span><span
style='font-size:9.5pt;font-family:Consolas;color:blue'>string</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'> </span><span
style='font-size:9.5pt;font-family:Consolas;color:purple'>State</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'> = </span><span
style='font-size:9.5pt;font-family:Consolas;color:#A31515'>&quot;State&quot;</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp; }</span></p>

<p class=MsoNormal><span style='font-size:9.5pt;line-height:105%;font-family:
Consolas;color:black'>}</span></p>

<p class=MsoNormal>In the following example, the side-effect “State” is adorned
on the method CurrentTime().&nbsp;&nbsp; Therefore, the call to CurrentTime()
in CheckDifference(), as highlighted, should be flagged as a warning because
the definition of the CheckDifference() method should also have an annotation.</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><b><span style='font-size:9.5pt;font-family:Consolas;
color:black'>Incorrect:</span></b></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp; </span><span style='font-size:9.5pt;font-family:
Consolas;color:blue'>public</span><span style='font-size:9.5pt;font-family:
Consolas;color:black'> </span><span style='font-size:9.5pt;font-family:Consolas;
color:blue'>class</span><span style='font-size:9.5pt;font-family:Consolas;
color:black'> </span><span style='font-size:9.5pt;font-family:Consolas;
color:darkblue'>UpdateBackend</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp; {</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-size:9.5pt;font-family:Consolas;color:blue'>public</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'> </span><span
style='font-size:9.5pt;font-family:Consolas;color:blue'>void</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'> </span><span
style='font-size:9.5pt;font-family:Consolas;color:darkcyan'>CheckDifference</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>(</span><span
style='font-size:9.5pt;font-family:Consolas;color:blue'>int</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'> id)</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style='font-size:9.5pt;font-family:Consolas;color:blue'>var</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'> stamp = </span><span
style='font-size:9.5pt;font-family:Consolas;color:darkcyan'>GetStamp</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>(id);</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style='font-size:9.5pt;font-family:Consolas;color:blue;background:
yellow'>var</span><span style='font-size:9.5pt;font-family:Consolas;color:black;
background:yellow'> currentTime = </span><span style='font-size:9.5pt;
font-family:Consolas;color:darkcyan;background:yellow'>CurrentTime</span><span
style='font-size:9.5pt;font-family:Consolas;color:black;background:yellow'>();</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style='font-size:9.5pt;font-family:Consolas;color:darkcyan'>StoreChanges</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>(stamp, currentTime);</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [</span><span
style='font-size:9.5pt;font-family:Consolas;color:darkblue'>HasEffects</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>(</span><span
style='font-size:9.5pt;font-family:Consolas;color:darkblue'>SideEffect</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>.</span><b><span
style='font-size:9.5pt;font-family:Consolas;color:purple'>State</span></b><span
style='font-size:9.5pt;font-family:Consolas;color:black'>)]</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-size:9.5pt;font-family:Consolas;color:blue'>public</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'> </span><span
style='font-size:9.5pt;font-family:Consolas;color:darkblue'>DateTime</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'> </span><span
style='font-size:9.5pt;font-family:Consolas;color:darkcyan'>CurrentTime</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>()</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style='font-size:9.5pt;font-family:Consolas;color:blue'>return</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'> </span><span
style='font-size:9.5pt;font-family:Consolas;color:darkblue'>DateTime</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>.</span><span
style='font-size:9.5pt;font-family:Consolas;color:purple'>Now</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><b><span style='font-size:9.5pt;font-family:Consolas;
color:black'>Correct</span></b></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp; </span><span style='font-size:9.5pt;font-family:
Consolas;color:blue'>public</span><span style='font-size:9.5pt;font-family:
Consolas;color:black'> </span><span style='font-size:9.5pt;font-family:Consolas;
color:blue'>class</span><span style='font-size:9.5pt;font-family:Consolas;
color:black'> </span><span style='font-size:9.5pt;font-family:Consolas;
color:darkblue'>UpdateBackend</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp; {</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [</span><span
style='font-size:9.5pt;font-family:Consolas;color:darkblue'>WithEffects</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>(</span><span
style='font-size:9.5pt;font-family:Consolas;color:darkblue'>SideEffect</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>.</span><b><span
style='font-size:9.5pt;font-family:Consolas;color:purple'>State</span></b><span
style='font-size:9.5pt;font-family:Consolas;color:black'>)] <span
style='background:aqua'>// Attribute added to remove warning.</span></span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-size:9.5pt;font-family:Consolas;color:blue'>public</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'> </span><span
style='font-size:9.5pt;font-family:Consolas;color:blue'>void</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'> </span><span
style='font-size:9.5pt;font-family:Consolas;color:darkcyan'>CheckDifference</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>(</span><span
style='font-size:9.5pt;font-family:Consolas;color:blue'>int</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'> id)</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style='font-size:9.5pt;font-family:Consolas;color:blue'>var</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'> stamp = </span><span
style='font-size:9.5pt;font-family:Consolas;color:darkcyan'>GetStamp</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>(id);</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style='font-size:9.5pt;font-family:Consolas;color:blue'>var</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'> currentTime = </span><span
style='font-size:9.5pt;font-family:Consolas;color:darkcyan'>CurrentTime</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>();</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style='font-size:9.5pt;font-family:Consolas;color:darkcyan'>StoreChanges</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>(stamp, currentTime);</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [</span><span
style='font-size:9.5pt;font-family:Consolas;color:darkblue'>HasEffects</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>(</span><span
style='font-size:9.5pt;font-family:Consolas;color:darkblue'>SideEffect</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>.</span><b><span
style='font-size:9.5pt;font-family:Consolas;color:purple'>State</span></b><span
style='font-size:9.5pt;font-family:Consolas;color:black'>)]</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-size:9.5pt;font-family:Consolas;color:blue'>public</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'> </span><span
style='font-size:9.5pt;font-family:Consolas;color:darkblue'>DateTime</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'> </span><span
style='font-size:9.5pt;font-family:Consolas;color:darkcyan'>CurrentTime</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>()</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style='font-size:9.5pt;font-family:Consolas;color:blue'>return</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'> </span><span
style='font-size:9.5pt;font-family:Consolas;color:darkblue'>DateTime</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>.</span><span
style='font-size:9.5pt;font-family:Consolas;color:purple'>Now</span><span
style='font-size:9.5pt;font-family:Consolas;color:black'>;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span style='font-size:9.5pt;font-family:Consolas;
color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'>Because the method CurrentTime() uses DateTime.Now,
it has the “State” effect, as indicated by the HasEffects() attribute.  
Therefore, all callers of CurrentTime, such as CheckDifference(), must be
annotated with either HasEffects or WithAffects.</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'>The difference between HasEffects and WithEffects
is as follows:</p>

<p class=MsoListParagraphCxSpFirst style='margin-bottom:0in;margin-bottom:.0001pt;
text-indent:-.25in;line-height:normal;text-autospace:none'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Method
annotated with HasEffects can only be called by methods that are annotated by
HasEffects or WithEffects</p>

<p class=MsoListParagraphCxSpLast style='margin-bottom:0in;margin-bottom:.0001pt;
text-indent:-.25in;line-height:normal;text-autospace:none'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Method
annotated WithEffects must call at least one method annotated by HasEffects or
WithEffects</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'>&nbsp;</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'>In the above example, rule 1 causes the light-blue
warning to be generated.</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'>&nbsp;</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'>However, if you then modify the implementation of
CurrentTime() and remove DateTime.Now, and its associated HasEffects
annocation, it’s not longer necessary (or valid) for CheckDifference to be
annotated with WithEffects   So based on rule 1, the WithEffects attribute must
be removed from CheckDifference at this point.  The Analyzer should catch that
and report it as a warning.</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'>&nbsp;</p>

</div>

</body>

</html>
